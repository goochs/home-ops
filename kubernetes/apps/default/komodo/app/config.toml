host = "https://komodo.serek.xyz"

oidc_enabled = true
oidc_provider = "https://sso.serek.xyz"
oidc_client_id = "komodo"
oidc_client_secret = "{{ .komodoSecret }}"

database.uri = "mongodb://{{ .dbUser }}:{{ .dbPass }}@komodo-ferret.default.svc.cluster.local:27017"

[[server]]
name = "nas"
[server.config]
address = "https://nas.serek.xyz:8120"
enabled = true
stats_monitoring = false

[[server]]
name = "rdio"
[server.config]
address = "https://10.0.10.123:8120"
enabled = true
stats_monitoring = false

[[repo]]
name = "home-ops"
[repo.config]

[[procedure]]
name = "Backup Core Database"
description = "Triggers the Core database backup at the scheduled time."
tags = ["system"]
config.schedule = "Every day at 01:00"

[[procedure.config.stage]]
name = "Stage 1"
enabled = true
executions = [
  { execution.type = "BackupCoreDatabase", execution.params = {}, enabled = true }
]

[[procedure]]
name = "Global Auto Update"
description = "Pulls and auto updates Stacks and Deployments using 'poll_for_updates' or 'auto_update'."
tags = ["system"]
config.schedule = "Every day at 03:00"

[[procedure.config.stage]]
name = "Stage 1"
enabled = true
executions = [
  { execution.type = "GlobalAutoUpdate", execution.params = {}, enabled = true }
]
